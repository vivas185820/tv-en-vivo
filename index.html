<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>TV Dominicana Live</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<!-- Adsterra Banner -->
<script>
atOptions = {
  'key' : '9e84da7cb4c4852358b069502cb5718d',
  'format' : 'iframe',
  'height' : 60,
  'width' : 468,
  'params' : {}
};
</script>
<script src="https://www.highperformanceformat.com/9e84da7cb4c4852358b069502cb5718d/invoke.js"></script>

<style>
body { margin:0; background:#000; color:white; font-family:Arial; }
header {
  position:sticky;
  top:0;
  background:#111;
  text-align:center;
  padding:10px;
  font-size:20px;
  z-index:10;
}
#player { width:100%; height:300px; background:black; }
#menu {
  display:flex;
  justify-content:center;
  gap:10px;
  margin:10px;
}
.tab {
  padding:10px 18px;
  background:#e50914;
  border-radius:20px;
  cursor:pointer;
}
.tab.active { background:#ff3c3c; }
#search {
  width:95%;
  margin:10px auto;
  display:block;
  padding:10px;
  border-radius:20px;
  border:none;
}
.grid {
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:10px;
  padding:10px;
}
.card {
  background:#1a1a1a;
  padding:10px;
  border-radius:8px;
  cursor:pointer;
  text-align:center;
}
.card.active { background:#333; }
#ad { text-align:center; margin:10px; }
</style>
</head>

<body>

<header>ðŸ“º TV Dominicana Live</header>

<video id="player" controls autoplay></video>

<div id="ad"></div>

<div id="menu">
  <div class="tab active" onclick="loadTV()">ðŸ“¡ TV</div>
  <div class="tab" onclick="loadRadio()">ðŸ“» Radios RD</div>
</div>

<input type="text" id="search" placeholder="ðŸ” Buscar canal o radio...">

<div class="grid" id="list"></div>

<script>
const tvURL = "https://iptv-org.github.io/iptv/index.m3u";
const radiosRD = [
  {name:"Z101 FM", url:"https://stream.zeno.fm/7a1zq3zv7k8uv"},
  {name:"La Mega 97.7", url:"https://stream.zeno.fm/8k6s8xg1d2zuv"},
  {name:"Rumba 98.5", url:"https://stream.zeno.fm/0y1s7g1t2zuv"},
  {name:"Caliente 104", url:"https://stream.zeno.fm/5h1s6g1t2zuv"},
  {name:"CDN Radio", url:"https://stream.zeno.fm/1d1s6g1t2zuv"},
  {name:"Radio Universal", url:"https://stream.zeno.fm/2e1s6g1t2zuv"}
];

let items = [];
let selected = 0;
let mode = "tv";

fetch(tvURL).then(r=>r.text()).then(data=>{
  const lines=data.split("\n");
  lines.forEach((l,i)=>{
    if(l.startsWith("#EXTINF")){
      items.push({name:l.split(",")[1], url:lines[i+1]});
    }
  });
  render();
  play(0);
});

function render(){
  const grid=document.getElementById("list");
  grid.innerHTML="";
  items.forEach((it,i)=>{
    const d=document.createElement("div");
    d.className="card"+(i===selected?" active":"");
    d.innerText=it.name;
    d.onclick=()=>play(i);
    grid.appendChild(d);
  });
}

function play(i){
  selected=i;
  const v=document.getElementById("player");
  const url=items[i].url;
  if(mode==="tv" && Hls.isSupported()){
    const hls=new Hls();
    hls.loadSource(url);
    hls.attachMedia(v);
    hls.on(Hls.Events.MANIFEST_PARSED,()=>v.play());
  } else {
    v.src=url;
    v.play();
  }
  render();
}

function loadTV(){
  mode="tv";
  items=[];
  fetch(tvURL).then(r=>r.text()).then(data=>{
    const lines=data.split("\n");
    lines.forEach((l,i)=>{
      if(l.startsWith("#EXTINF")){
        items.push({name:l.split(",")[1], url:lines[i+1]});
      }
    });
    render(); play(0);
  });
}

function loadRadio(){
  mode="radio";
  items=radiosRD;
  render(); play(0);
}

// Buscador
document.getElementById("search").addEventListener("input",function(){
  const t=this.value.toLowerCase();
  const f=items.filter(x=>x.name.toLowerCase().includes(t));
  items=f; selected=0; render();
});

// Control remoto
document.addEventListener("keydown",e=>{
  if(e.key==="ArrowDown" && selected<items.length-1) play(selected+1);
  if(e.key==="ArrowUp" && selected>0) play(selected-1);
  if(e.key==="Enter") play(selected);
});
</script>

</body>
</html>
